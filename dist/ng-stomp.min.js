/**
 * ngStomp
 *
 * @version 0.3.0
 * @author Maik Hummel <m@ikhummel.com>
 * @license MIT
 */
!function(a,b){"use strict";return"undefined"==typeof module||"object"!=typeof module.exports?b(a.angular,a.SockJS,a.Stomp):void(module.exports=b(require("angular"),require("sockjs-client"),require("stompjs")))}(window,function(a,b,c){"use strict";var d="ngStomp";return a.module(d,[]).service("$stomp",["$rootScope","$q",function(a,d){this.sock=null,this.stomp=null,this.debug=null,this.setDebug=function(a){this.debug=a},this.connect=function(a,e,f){e=e||{};var g=d.defer();return this.sock=new b(a),this.stomp=c.over(this.sock),this.stomp.debug=this.debug,this.stomp.connect(e,function(a){g.resolve(a)},function(a){g.reject(a),f(a)}),g.promise},this.disconnect=function(){var a=d.defer();return this.stomp.disconnect(a.resolve),a.promise},this.subscribe=this.on=function(a,b,c){return c=c||{},this.stomp.subscribe(a,function(a){var c=null;try{c=JSON.parse(a.body)}finally{b&&b(c,a.headers,a)}},c)},this.unsubscribe=this.off=function(a){a.unsubscribe()},this.send=function(a,b,c){var e=d.defer();try{var f=JSON.stringify(b);c=c||{},this.stomp.send(a,c,f),e.resolve()}catch(a){e.reject(a)}return e.promise}}]),d});